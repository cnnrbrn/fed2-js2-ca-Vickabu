import{b as l}from"./read-CZ4ZNcVz.js";import{a as i,s as d}from"./authGuard-BMPVuzbW.js";import{a as m,h as u}from"./headers-CvDvskcI.js";import{c as p,a as f,o as E}from"./createButton-BeE04EkZ.js";async function h(t){try{const e=await fetch(`${m}/${t}`,{method:"GET",headers:u()});if(e.ok)return(await e.json()).data;console.error("Failed to fetch profile:",e.status)}catch(e){console.error("Error fetching profile:",e)}}i();d();const g=JSON.parse(localStorage.getItem("userInfo")),s=g?.name;s?y(s):console.error("No user is logged in.");async function y(t){try{const e=await h(t);if(e){P(e);const o=await l(t);b(o,e.name)}else console.error("Profile not found."),document.body.innerHTML="<p>Profile not found.</p>"}catch(e){console.error("Error loading profile:",e)}}function P(t){const e=document.createElement("div");e.classList.add("profile");const o=document.createElement("img");o.src=t.avatar?.url,o.alt=t.avatar?.alt||"User Avatar";const n=document.createElement("h1");n.textContent=t.name;const a=document.createElement("p");a.textContent=t.bio||"No bio available",e.append(n,o,a),document.body.appendChild(e)}function b(t,e){const o=document.createElement("div");o.classList.add("posts-list"),t.length===0?o.innerHTML="<p>No posts available.</p>":t.forEach(n=>{const a=C(n);o.appendChild(a)}),document.body.appendChild(o)}function C(t){const e=document.createElement("div");e.classList.add("post");const o=document.createElement("h2");o.textContent=t.title;const n=document.createElement("p");n.textContent=t.body;const a=p(t.id,E),c=f(t.id);if(e.append(c,a),e.append(o,n),t.media?.url){const r=document.createElement("img");r.src=t.media.url,r.alt=t.media.alt||"Post image",r.className="postImage",e.appendChild(r)}return e}
