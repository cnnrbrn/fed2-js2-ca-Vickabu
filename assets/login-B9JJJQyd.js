import{b as m,h as f}from"./headers-CvDvskcI.js";async function d({email:e,password:n}){try{const o=await fetch(m,{method:"POST",headers:{...f(),"Content-Type":"application/json"},body:JSON.stringify({email:e,password:n})});if(!o.ok){const{message:l}=await o.json();throw new Error(l||"Unknown error")}const{data:t}=await o.json(),{accessToken:r,name:a,bio:s,avatar:i,banner:c}=t;return localStorage.setItem("accessToken",r),localStorage.setItem("userInfo",JSON.stringify({name:a,email:e,bio:s,avatar:i,banner:c})),t}catch(o){throw console.error("Login failed:",o),o}}async function g(e){e.preventDefault();const{email:n,password:o}=Object.fromEntries(new FormData(e.target));try{const t=await d({email:n.trim(),password:o});window.location.href="/"}catch(t){alert(`Login failed: ${t.message}`)}}document.forms.login.addEventListener("submit",g);
