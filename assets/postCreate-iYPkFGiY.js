import{A as c,h as i}from"./headers-CvDvskcI.js";import{a as u,s as d}from"./authGuard-BMPVuzbW.js";async function m({title:r,body:s,tags:n=[],media:o=null}){try{const t=await fetch(c,{method:"POST",headers:i(),body:JSON.stringify({title:r,body:s,tags:n,media:o?{url:o.url,alt:o.alt}:null})});if(t.ok){const{data:a}=await t.json();return a}else{const a=await t.json();throw console.error("Failed to create post:",t.status,t.statusText,a),new Error(`Error ${t.status}: ${a.message}`)}}catch(t){throw console.error("Error creating post:",t),t}}async function g(r){r.preventDefault();const s=r.target.title.value,n=r.target.body.value,o=r.target.tags.value.split(",").map(e=>e.trim()),t=r.target.mediaUrl.value,a=r.target.mediaAlt.value,l=t?{url:t,alt:a}:null;try{const e=await m({title:s,body:n,tags:o,media:l});r.target.reset(),window.location.href="/"}catch(e){console.error("Error while creating post:",e)}}u();d();document.forms.createPost.addEventListener("submit",g);
